<!DOCTYPE html>
<html lang="en" xmlns="https://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      xmlns:pages="https://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8;width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Raleway:400,300,600" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3.css"/>
    <script th:inline="javascript"  src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>


    <!--bootstrap-->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css"/>
    <script th:inline="javascript" src="//code.jquery.com/jquery.js"></script>
    <script th:inline="javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script th:inline="javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.js"></script>
    <!--boot-->


    <script type="text/javascript" th:inline="javascript">
         window.onload=function () {
             processStatusCharts();
             taskPriorityChart();
         }
    </script>



        <script type="text/javascript" th:inline="javascript">

        var statAll = [[${statall}]];
        var inprocessstatus = [[${inprocessstatus}]];
        var donestatus = [[${donestatus}]];
        var startedstatus = [[${startedstatus}]];
        function processStatusCharts() {
            var chart = new CanvasJS.Chart("chartContainer", {
                theme: "theme3",//theme1
                title:{
                    text: "TASK PROCESSES CHART"
                },
                animationEnabled: true,   // change to true
                data: [
                    {
                        // Change type to "bar", "area", "spline", "pie",'column'etc.
                        type: "bar",
                        dataPoints: [
                            { label: "ALL TASKS",  y: statAll },
                            { label: "TASKS IN PROCESS", y: inprocessstatus  },
                            { label: "COMPLETED STATUS TASKS", y: donestatus  },
                            { label: "STARTED STATUS TASKS",  y: startedstatus  }

                        ]
                    }
                ]
            });
            chart.render();
        }

    </script>
    <script type="text/javascript" th:inline="javascript">

        var statAll = [[${statall}]];
        var mediumpriority = [[${mediumpriority}]];
        var lowpriority = [[${lowpriority}]];
        var highpriority = [[${highpriority}]];


        function taskPriorityChart() {
            var chart = new CanvasJS.Chart("chartContainer2", {
                theme: "theme3",//theme1
                title:{
                    text: "TASK PRIORIRTIES CHART"
                },
                animationEnabled: true,   // change to true
                data: [
                    {
                        // Change type to "bar", "area", "spline", "pie",'column'etc.
                        type: "pie",
                        dataPoints: [
//                            { label: "ALL TASKS",  y: statAll },
                            { label: "LOW PRIORITY TASKS",  y: lowpriority  },
                            {label:"HIGH PRIORITY TASKS",y:highpriority},
                            {label:"MEDIUM PRIORITY TASKS",y:mediumpriority}
                        ]
                    }
                ]
            });
            chart.render();
        }

    </script>



        <!--<meta name="viewport" content="width=device-width, initial-scale=1"/>-->
    <!--<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>-->

    <!--<link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.4/css/bootstrap.min.css"-->
          <!--th:href="@{/webjars/bootstrap/3.3.4/css/bootstrap.min.css}"-->
          <!--rel="stylesheet" media="screen" />-->

    <!--<script src="http://cdn.jsdelivr.net/webjars/jquery/2.1.4/jquery.min.js"-->
            <!--th:src="@{/webjars/jquery/2.1.4/jquery.min.js}"></script>-->
    <!--&lt;!&ndash;<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>&ndash;&gt;-->
    <!--&lt;!&ndash;<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>&ndash;&gt;-->
    <!--&lt;!&ndash;<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>&ndash;&gt;-->
    <title>Task application</title>


    <style>

        div.scrollable {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: auto;
        }
        span{
            word-spacing: 20px;
        }
        /*th{*/
            /*word-spacing: 30px;*/
        /*}*/
        table{
            align-content: center;
        }
    </style>
    <!--<script th:inline="javascript">-->
        <!--/*<![CDATA[*/-->

        <!--function thy() {-->
            <!--var message = [[${stat}]];-->
            <!--alert(message);-->
        <!--}-->


        <!--/*]]>*/-->
    <!--</script>-->

</head>
<body>
<!--/*/ <th:block th:include="fragments/header :: header"></th:block> /*/-->

<!--<div class="container">-->

    <!--<div class="panel panel-default" >-->
        <!--<div class="panel-body">-->
            <!--<h4 th:inline="text"  style="float: left">Hello [[${#httpServletRequest.remoteUser}]]!</h4>-->
            <!--<form th:action="@{/logout}" method="post" style="float: right" >-->
                <!--<input type="submit" value="Sign Out" />-->
            <!--</form>-->
        <!--</div>-->
    <!--</div>-->



<!--<button onclick="processStatusCharts() ;taskPriorityChart();">show charts</button>-->
    <div class="w3-card w3-row w3-hover-shadow w3-round" style="margin: 1%">
            <div class="w3-half" id="chartContainer" style="height: 200px; width: 50%;"></div>

            <div class="w3-half" id="chartContainer2" style="height: 200px; width: 50%;"></div>


    </div>



<hr/>



    <form method="post" th:action="@{/}" th:object="${newTask}" enctype="multipart/form-data" id="carform" class="w3-card" style="margin: 1%">
        <b style="margin: 40%">CREATE AND ASSIGN A NEW TASK</b>
        <!--<fieldset>-->
            <div class="row">
                <!--<div class="nine columns">-->

                <div class="w3-row-padding">
                    <div class="w3-half">
                        <div class="w3-row">
                            <div class="w3-third"><h5 style="color: gray">Set a task priority</h5></div>
                            <div class="w3-rest" >
                                <select th:field="*{taskPriority}" form="carform" required="required" class="w3-select w3-border">
                                    <option th:each="taskPriority : ${taskPriority}"
                                            th:value="${taskPriority}"
                                            th:text="${taskPriority}"></option>
                                </select>
                            </div>
                        </div>

                        <!--<input type="text" placeholder="Task priority" class="u-full-width" th:field="*{taskPriority}" required="required"/>-->



                    </div>
                    <div class="w3-half">
                        <div class="w3-row">
                            <div class="w3-third"><h5 style="color: gray">Set a task status</h5></div>
                            <div class="w3-rest" >
                                <!--<input  type="text" placeholder="task status" class="u-full-width" th:field="*{taskStatus}" required="required" />-->
                                <select th:field="*{taskStatus}" form="carform" required="required" class="w3-select w3-border">
                                    <option th:each="taskStatus : ${taskStatus}"
                                            th:value="${taskStatus}"
                                            th:text="${taskStatus}"></option>
                                </select>
                            </div>



                        </div>



                    </div>

                </div>
                <div class="w3-row-padding">
                    <div class="w3-half">

                        <div class="w3-row">
                            <div class="w3-third"><h5 style="color: gray">Set a due to date </h5></div>
                            <div class="w3-rest" >
                                <input type="text" onfocus="(this.type='date')" placeholder="due to(set a date)" class="u-full-width" th:field="*{dueTo}" required="required" />

                            </div>

                        </div>


                    </div>
                    <div class="w3-half">
                        <div class="w3-row">
                            <div class="w3-third"><h5 style="color: gray">choose an email</h5></div>
                            <div class="w3-rest" >
                                <select th:field="*{email}" form="carform" required="required" class="w3-select w3-border">
                                    <option th:each="email : ${email}"
                                            th:value="${email}"
                                            th:text="${email}"></option>
                                </select>
                            </div>

                        </div>

                        <!--<input type="text" placeholder="responsible email" class="u-full-width" th:field="*{email}" required="required"/>-->

                    </div>

                </div>
                <div class="w3-row-padding">
                    <div class="w3-col">
                        <input type="text" placeholder="Description of the task" class="u-full-width" th:field="*{description}" required="required"/>

                    </div>


                </div>

                            <!--<div class="three columns">-->
                                <!--<button type="submit" class="w3-btn w3-white w3-border w3-border-blue w3-round" style="width: 20px">Add</button>-->
                                <!--<div th:if="${message}" class="w3-panel w3-pale-green  w3-border">-->
                                    <!--<h6 th:text="${message}"/>-->
                                <!--</div>-->
                                <!--<div th:if="${deleted}" class="w3-panel w3-pale-red  w3-border-red">-->
                                    <!--<h6 th:text="${deleted}"/>-->
                                <!--</div>-->

                            <!--</div>-->

                <div class="w3-row">
                    <div class=" w3-container w3-third">
                        <button type="submit" class="w3-btn w3-white w3-border w3-border-blue w3-round" style="width: 150px;padding-top: 10px; text-align: center;margin-left: auto" >ADD</button>
                    </div>
                    <div class="w3-container w3-twothird">
                        <div th:if="${message}" class="w3-panel w3-pale-green  w3-border w3-round w3-center w3-animate-right">
                            <h6 th:text="${message}"/>
                        </div>
                        <div th:if="${deleted}" class="w3-panel w3-pale-red  w3-border-red w3-round">
                            <h6 th:text="${deleted}"/>
                        </div>                    </div>
                </div>






                <!--<input type="text" placeholder="Description of the task" class="u-full-width" th:field="*{description}" required="required"/>-->
                    <!--<input type="text" placeholder="Task priority" class="u-full-width" th:field="*{taskPriority}" required="required"/>-->
                    <!--<input type="text" placeholder="task status" class="u-full-width" th:field="*{taskStatus}" required="required" />-->

                <div class="w3-container w3-center w3-animate-right">
                    <span style="color: red;background-color: lavenderblush;font-weight:bold" th:if="${#fields.hasErrors('description')}" th:errors="*{description}" onclick="this.parentElement.style.display='none'">Description errors</span>
                    <span style="color: red" th:if="${#fields.hasErrors('taskPriority')}" th:errors="*{taskPriority}">task priority errors</span>
                    <span style="color: red" th:if="${#fields.hasErrors('taskStatus')}" th:errors="*{taskStatus}">status errors</span>
                    <span style="color: red" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">email errors</span>
                    <span style="color: red; background-color: lavenderblush;font-weight:bold"  th:if="${#fields.hasErrors('dueTo')}" th:errors="*{dueTo}">due to date  errors</span>
                </div>




                    



                <!--</div>-->
                <!--<div class="w3-panel w3-pale-red w3-leftbar w3-border-red">-->



            </div>
        <!--</fieldset>-->



    </form>
    <div class="w3-responsive w3-round" style="margin: 1%">
        <table
                data-toggle="table"
                data-classes="table table-hover table-condensed"
                data-striped="true"
                data-sort-name="id"
                data-sort-order="asc"
                data-pagination="true"
                data-search="description"
                data-order="id"

        >
            <caption><h1><b>Current tasks</b></h1></caption>
            <!--<tr class="w3-pale-blue">-->
                <thead class="w3-pale-blue">
                <th data-field="id" data-sortable="true">ID</th>
                <!--<th><b>COMPLETED</b></th>-->
                <th data-field="description" data-sortable="true"><b>DESCRIPTION</b></th>
                <th data-field="createDate" data-sortable="true"><b>CREATED AT</b></th>
                <th data-field="dueToDate" data-sortable="true"><b>DUE TO</b></th>
                <th data-field="priority" data-sortable="true"><b>PRIORITY</b></th>
                <th data-field="status" data-sortable="true"><b>STATUS</b></th>
                <th data-field="email" data-sortable="true"><b>EMAIL</b></th>

                <th><b>ACTION</b></th>
                <th><b>COMPLETED</b></th>
                </thead>
            <!--</tr>-->
            <tbody id="myTable" class="w3-round" >

            <tr th:each="task  : ${tasks}"  >
                <td th:text="${task.id}"></td>
                <!--<td th:text="${task.completed}"></td>-->
                <!--<td>-->
                <!--<form th:method="put" th:action="@{/}">-->
                <!--&lt;!&ndash;<input type="hidden" name="id" th:value="${task.id}" />&ndash;&gt;-->
                <!--&lt;!&ndash;<input type="hidden" name="description" th:value="${task.description}" />&ndash;&gt;-->
                <!--&lt;!&ndash;<input type="hidden" name="description" th:value="${task.taskPriority}" />&ndash;&gt;-->
                <!--&lt;!&ndash;<input type="hidden" name="description" th:value="${task.taskStatus}" />&ndash;&gt;-->
                <!--&lt;!&ndash;<input type="hidden" name="description" th:value="${task.createdAt}" />&ndash;&gt;-->

                <!--<input type="checkbox" name="completed" th:checked="${task.completed}" onchange="form.submit()" />-->
                <!--</form>-->
                <!--</td>-->
                <td th:text="${task.description}"></td>
                <td th:text="${task.createdAt}"></td>
                <td th:text="${task.dueTo}"></td>
                <td th:text="${task.taskPriority}"></td>
                <td th:text="${task.taskStatus}"></td>
                <td th:text="${task.email}"></td>


                <td>
                    <div class="three columns">
                        <form th:method="delete" th:action="@{/}">
                            <input type="hidden" name="id" th:value="${task.id}" />
                            <button class="w3-btn-floating w3-ripple w3-round w3-large w3-pale-red" type="submit" style="text-align:center;width: auto;margin-left: auto" onclick="return confirm(' Delete task ? Are You shure ?')" >Delete</button>
                        </form>

                    </div>
                </td>
                <td>
                    <div class="three columns">
                        <form th:method="put" th:action="@{/}">
                            <input type="hidden" name="id" th:value="${task.id}" />
                            <input type="hidden" name="description" th:value="${task.description}" />
                            <input type="hidden" name="taskPriority" th:value="${task.taskPriority}" />
                            <input type="hidden" name="taskStatus" th:value="${task.taskStatus}" />
                            <input type="hidden" name="email" th:value="${task.email}" />
                            <input type="hidden" name="dueTo" th:value="${task.dueTo}" />


                            <input type="checkbox" name="completed" th:checked="${task.completed}" onchange="form.submit()" />
                        </form>
                    </div>
                </td>
                <!--<td>-->
                <!--&lt;!&ndash;<input type="checkbox" name="completed" th:checked="${task.completed}" onchange="form.submit()" />&ndash;&gt;-->

                <!--</td>-->

            </tr>
            </tbody>

        </table>
    </div>






    <!--<div class="row" th:each="task : ${tasks}">-->
        <!--<div class="nine columns">-->
            <!--<form th:method="put" th:action="@{/}">-->
                <!--<input type="hidden" name="id" th:value="${task.id}" />-->
                <!--<input type="hidden" name="description" th:value="${task.description}" />-->
                <!--<input type="checkbox" name="completed" th:checked="${task.completed}" onchange="form.submit()" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
                <!--<span th:text="${task.description}">          </span>      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;          <span th:text="${task.createdAt}"></span>-->
                <!--<p class="alert alert-danger" th:if="${error != null}" th:text="${error}"></p>-->


            <!--</form>-->
        <!--</div>-->
        <!--<div class="three columns">-->
            <!--<form th:method="delete" th:action="@{/}">-->
                <!--<input type="hidden" name="id" th:value="${task.id}" />-->
                <!--<button class="button u-full-width" type="submit">Delete</button>-->
            <!--</form>-->
        <!--</div>-->
    <!--</div>-->
  <hr/>
<!--</div>-->

</body>
</html>